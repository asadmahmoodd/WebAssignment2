<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="Style.css" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Eatoo</title>
    <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
  </head>
  <body>
    <!-- Floating Chatbot Button -->
    <button id="chatbot-btn">ðŸ’¬</button>

    <div
      class="modal fade"
      id="chatbotModal"
      tabindex="-1"
      aria-labelledby="chatbotModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title" id="chatbotModalLabel">Chatbot</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body chatbot-body">
            <p>Hello! How can I assist you today?</p>
            <input
              type="text"
              class="form-control mt-2"
              placeholder="Type your message..."
              id="chatInput"
            />
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">eatoo</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="#order">Order</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#contact">Contact Us</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                href="#"
                data-bs-toggle="modal"
                data-bs-target="#feedbackModal"
                >Feedback</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#About">About Us</a>
            </li>
          </ul>
          <button
            class="btn btn-outline-primary"
            data-bs-toggle="modal"
            data-bs-target="#loginModal"
          >
            Login
          </button>
          <button
            class="btn btn-outline-success"
            data-bs-toggle="modal"
            data-bs-target="#signupModal"
          >
            Sign Up
          </button>
          <!-- Cart Button -->
          <button
            class="btn btn-outline-warning cart-toggle"
            data-bs-toggle="modal"
            data-bs-target="#cartModal"
          >
            <i class="fas fa-shopping-cart"></i>
          </button>
        </div>
      </div>
    </nav>

    <div id="carouselExampleIndicators" class="carousel slide">
      <div class="carousel-indicators">
        <button
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide-to="0"
          class="active"
          aria-current="true"
          aria-label="Slide 1"
        ></button>
        <button
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide-to="1"
          aria-label="Slide 2"
        ></button>
        <button
          type="button"
          data-bs-target="#carouselExampleIndicators"
          data-bs-slide-to="2"
          aria-label="Slide 3"
        ></button>
      </div>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="./images/delv.jpg" class="d-block w-100" alt="..." />
        </div>
        <div class="carousel-item">
          <img src="./images/delv2.jpg" class="d-block w-100" alt="..." />
        </div>
        <div class="carousel-item">
          <img src="./images/delv3.jpg" class="d-block w-100" alt="..." />
        </div>
      </div>
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#carouselExampleIndicators"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>

    <div
      class="modal fade"
      id="feedbackModal"
      tabindex="-1"
      aria-labelledby="feedbackModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="feedbackModalLabel">Feedback Form</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="name" class="form-label">Your Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="name"
                  placeholder="Enter your name"
                />
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Your Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="email"
                  placeholder="Enter your email"
                />
              </div>
              <div class="mb-3">
                <label for="feedback" class="form-label">Your Feedback</label>
                <textarea
                  class="form-control"
                  id="feedback"
                  rows="4"
                  placeholder="Enter your feedback"
                ></textarea>
              </div>
              <button type="submit" class="btn btn-success w-100">
                Submit Feedback
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Login Modal -->
    <div
      class="modal fade"
      id="loginModal"
      tabindex="-1"
      aria-labelledby="loginModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="loginModalLabel">Login</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="loginEmail" class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="loginEmail"
                  placeholder="Enter your email"
                />
              </div>
              <div class="mb-3">
                <label for="loginPassword" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  id="loginPassword"
                  placeholder="Enter your password"
                />
              </div>
              <button type="submit" class="btn btn-primary w-100">Login</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Signup Modal -->
    <div
      class="modal fade"
      id="signupModal"
      tabindex="-1"
      aria-labelledby="signupModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="signupModalLabel">Sign Up</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form>
              <div class="mb-3">
                <label for="signupName" class="form-label">Full Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="signupName"
                  placeholder="Enter your name"
                />
              </div>
              <div class="mb-3">
                <label for="signupEmail" class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control"
                  id="signupEmail"
                  placeholder="Enter your email"
                />
              </div>
              <div class="mb-3">
                <label for="signupPassword" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  id="signupPassword"
                  placeholder="Create a password"
                />
              </div>
              <button type="submit" class="btn btn-success w-100">
                Sign Up
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Cart Modal -->
    <div
      class="modal fade"
      id="cartModal"
      tabindex="-1"
      aria-labelledby="cartModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="cartModalLabel">Your Cart</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <ul id="cart-items" class="list-group mb-3">
              <li class="list-group-item">Cart is empty</li>
            </ul>
            <p class="text-center">Total: Rs <span id="cart-total">0.00</span></p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <div classs="A"></div>

    <div id="order" class="container text-center mt-5">
      <h2 class="fw-bold">Order Now</h2>
      <p class="text-muted">Delicious meals delivered to your doorstep!</p>
    </div>

    <div class="container mt-5">
      <div id="product-row-1" class="row"></div>
    </div>
    <div class="container mt-5">
      <div id="product-row-2" class="row"></div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container">
      <div
        id="cartToast"
        class="toast align-items-center text-white bg-success border-0"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="d-flex">
          <div class="toast-body" id="toastMessage">Item added to cart!</div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            data-bs-dismiss="toast"
            aria-label="Close"
          ></button>
        </div>
      </div>
    </div>

    <script>
      function showToast(message) {
        const toastEl = document.getElementById("cartToast");
        const toastMessage = document.getElementById("toastMessage");
        toastMessage.innerText = message;
        const toast = new bootstrap.Toast(toastEl);
        toast.show();
      }

      $(document).ready(function () {
        console.log("jQuery loaded, initializing app");

        // Load cart from LocalStorage
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        updateCartDisplay();

        // Load products from JSON
        $.get("products.json", function (data) {
          console.log("Products loaded:", data);
          let row1 = $("#product-row-1");
          let row2 = $("#product-row-2");

          data.forEach((product, index) => {
            let card = `
              <div class="col-md-4">
                <div class="card" data-id="${product.id}" data-name="${product.name}" data-price="${product.price}">
                  <img src="${product.image}" class="card-img-top" alt="${product.name}" />
                  <div class="card-body text-center">
                    <h5 class="card-title">${product.name}</h5>
                    <p class="card-text">Rs ${product.price}/-</p>
                    <button class="btn btn-order me-2" onclick="showToast('Order placed for ${product.name}!')">
                      Order Now
                    </button>
                    <button class="btn btn-cart add-to-cart">
                      Add to Cart
                    </button>
                  </div>
                </div>
              </div>
            `;
            if (index < 3) {
              row1.append(card);
            } else {
              row2.append(card);
            }
          });
        }).fail(function (xhr, status, error) {
          console.error("Failed to load products:", status, error);
          showToast("Error loading products");
        });

        // Add to Cart handler
        $(document).on("click", ".add-to-cart", function () {
          console.log("Add to Cart clicked");
          let card = $(this).closest(".card");
          let product = {
            id: card.data("id"),
            name: card.data("name"),
            price: parseFloat(card.data("price")),
          };
          console.log("Product:", product);

          // AJAX POST to cart.json
          $.ajax({
            url: "cart.json",
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify(product),
            dataType: "json",
            success: function (response) {
              console.log("AJAX success:", response);
              cart.push(product);
              localStorage.setItem("cart", JSON.stringify(cart));
              updateCartDisplay();
              showToast(`${product.name} added to cart!`);
            },
            error: function (xhr, status, error) {
              console.error("AJAX error:", status, error);
              cart.push(product);
              localStorage.setItem("cart", JSON.stringify(cart));
              updateCartDisplay();
              showToast(`${product.name} added to cart!`);
            },
          });
        });

        // Remove from Cart handler
        $(document).on("click", ".remove-item", function () {
          let itemId = $(this).data("id");
          console.log("Remove item:", itemId);
          cart = cart.filter((item) => item.id !== itemId);
          localStorage.setItem("cart", JSON.stringify(cart));
          updateCartDisplay();
          showToast("Item removed from cart!");
        });

        // Update cart display
        function updateCartDisplay() {
          let cartItems = $("#cart-items");
          let cartTotal = $("#cart-total");
          cartItems.empty();

          if (cart.length === 0) {
            cartItems.append('<li class="list-group-item">Cart is empty</li>');
            cartTotal.text("0.00");
          } else {
            cart.forEach((item) => {
              cartItems.append(
                `<li class="list-group-item d-flex justify-content-between align-items-center">
                  ${item.name} - Rs ${item.price.toFixed(2)}
                  <button class="btn btn-danger btn-sm remove-item" data-id="${item.id}">Remove</button>
                </li>`
              );
            });
            let total = cart.reduce((sum, item) => sum + item.price, 0);
            cartTotal.text(total.toFixed(2));
          }
          console.log("Cart updated:", cart);
        }
      });
    </script>

    <div id="About" class="about-section">
      <h2>About Us</h2>
      <p>
        Welcome to <strong>Eatoo</strong>, your go-to food delivery service,
        bringing delicious meals straight to your doorstep. We connect you with
        top restaurants, ensuring
        <strong>quality, speed, and convenience</strong> with every order.
      </p>
      <ul class="icon-list">
        <li><strong>Wide Variety</strong> â€“ From fast food to fine dining.</li>
        <li><strong>Fast & Reliable</strong> â€“ Fresh, hot, and on time.</li>
        <li><strong>Easy Ordering</strong> â€“ Simple, seamless, and secure.</li>
      </ul>
      <p>
        Enjoy effortless food delivery wherever you are.
        <strong><a class="order" href="#order">Order now </a></strong> and taste the
        convenience!
      </p>
    </div>

    <footer class="footer" id="contact">
      <div class="container text-center">
        <hr class="light" />
        <div class="row align-items-center">
          <div class="col-md-4 text-md-start text-center">
            <p style="color: red">Â© 2025 Eatoo. All rights reserved.</p>
          </div>
          <div class="col-md-4 text-center">
            <a href="index.html" style="text-decoration: none">
              <h2 class="brand-name">eatoo</h2>
            </a>
          </div>
          <div class="col-md-4 text-md-end text-center">
            <div class="social-icons d-inline">
              <a href="/cdn-cgi/l/email-protection#e7b4b2b7b8a7b0b6b3a8b5b3c984888a" class="email">
                <i class="fas fa-at"></i>
              </a>
              <a
                href="https://www.facebook.com"
                target="_blank"
                class="facebook"
                ><i class="fab fa-facebook"></i
              ></a>
              <a
                href="https://www.instagram.com"
                target="_blank"
                class="instagram"
                ><i class="fab fa-instagram"></i
              ></a>
              <a href="https://www.x.com" target="_blank" class="twitter"
                ><i class="fab fa-twitter"></i
              ></a>
              <a
                href="https://www.linkedin.com"
                target="_blank"
                class="linkedin"
                ><i class="fab fa-linkedin"></i
              ></a>
            </div>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>